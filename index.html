<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Music Player</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #111;
    color: #eee;
    margin: 0;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  header {
    background: #222;
    padding: 1rem;
    text-align: center;
    font-size: 1.5rem;
    font-weight: bold;
  }

  main {
    flex: 1;
    display: flex;
    flex-direction: row;
  }

  #library, #playlist {
    flex: 1;
    padding: 1rem;
    overflow-y: auto;
  }

  #library {
    border-right: 2px solid #333;
  }

  .track {
    background: #1c1c1c;
    border-radius: 8px;
    padding: 0.5rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .track:hover { background: #292929; }

  .thumb {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    background: #444;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: #ccc;
  }

  .meta { flex: 1; margin-left: 10px; }

  .controls button {
    background: none;
    border: none;
    color: #eee;
    cursor: pointer;
    font-size: 1rem;
  }

  #player {
    background: #222;
    padding: 1rem;
    text-align: center;
  }

  #nowThumb {
    width: 60px;
    height: 60px;
    border-radius: 10px;
    background: #444;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    margin: 0 auto 10px;
  }

  #controls button {
    margin: 0 5px;
    font-size: 1.2rem;
    background: none;
    border: none;
    color: #eee;
    cursor: pointer;
  }

  #progress {
    width: 80%;
    height: 6px;
    background: #333;
    border-radius: 3px;
    margin: 10px auto;
    overflow: hidden;
  }

  #bar {
    width: 0%;
    height: 100%;
    background: #0f0;
  }

  #time {
    font-size: 0.8rem;
    margin-bottom: 5px;
  }

  #vol { width: 80%; }
  footer {
    background: #111;
    text-align: center;
    padding: 0.5rem;
    color: #777;
  }
</style>
</head>
<body>
<header>üéß Free Music Player</header>

<main>
  <section id="library">
    <h3>Library</h3>
    <input id="search" type="text" placeholder="Search music..." style="width:90%;margin-bottom:10px;">
    <div id="libraryList"></div>
  </section>

  <section id="playlist">
    <h3>Playlist</h3>
    <div id="playlistList"></div>
  </section>
</main>

<div id="player">
  <div id="nowThumb">FM</div>
  <div id="nowTitle">Nothing Playing</div>
  <div id="nowArtist">‚Äî</div>
  <div id="controls">
    <button id="prev">‚èÆ</button>
    <button id="play">‚ñ∂</button>
    <button id="next">‚è≠</button>
    <button id="repeat">üîÅ</button>
  </div>
  <div id="progress"><div id="bar"></div></div>
  <div id="time">0:00 / 0:00</div>
  <input id="vol" type="range" min="0" max="1" step="0.01" value="1">
  <div><a id="downloadLink" href="#" target="_blank" style="color:#0f0;">Download</a></div>
</div>

<footer>¬© 2025 Free Music Player ‚Äì Play, Pause, Repeat üé∂</footer>

<script>
  const demoTracks = [
    { title: 'Sunny Morning', artist: 'Free Artist', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3' },
    { title: 'Breezy Afternoon', artist: 'Free Artist', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3' },
    { title: 'Calm Evening', artist: 'Free Artist', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3' }
  ];

  let tracks = demoTracks;
  let current = 0;
  let audio = new Audio(tracks[current].url);
  let isPlaying = false;
  let repeatMode = 0; // 0 = off, 1 = one, 2 = all

  // Elements
  const playBtn = document.getElementById('play');
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  const repeatBtn = document.getElementById('repeat');
  const nowTitle = document.getElementById('nowTitle');
  const nowArtist = document.getElementById('nowArtist');
  const nowThumb = document.getElementById('nowThumb');
  const bar = document.getElementById('bar');
  const timeEl = document.getElementById('time');
  const vol = document.getElementById('vol');
  const search = document.getElementById('search');
  const libraryEl = document.getElementById('libraryList');
  const playlistEl = document.getElementById('playlistList');
  const downloadLink = document.getElementById('downloadLink');

  function renderLibrary(filter = '') {
    libraryEl.innerHTML = '';
    const q = filter.toLowerCase();
    tracks
      .filter(t => !q || t.title.toLowerCase().includes(q))
      .forEach((t, i) => {
        const el = document.createElement('div');
        el.className = 'track';
        el.innerHTML = `
          <div class="thumb">${t.title[0].toUpperCase()}</div>
          <div class="meta"><div>${t.title}</div><div>${t.artist}</div></div>
          <div class="controls"><button>‚ñ∂</button></div>`;
        el.querySelector('button').onclick = () => playTrack(i);
        libraryEl.appendChild(el);
      });
  }

  function renderPlaylist() {
    playlistEl.innerHTML = '';
    tracks.forEach((t, i) => {
      const el = document.createElement('div');
      el.className = 'track';
      el.innerHTML = `<div class="meta"><div>${i + 1}. ${t.title}</div><div>${t.artist}</div></div>`;
      playlistEl.appendChild(el);
    });
  }

  function updateNow() {
    const t = tracks[current];
    nowTitle.textContent = t.title;
    nowArtist.textContent = t.artist;
    nowThumb.textContent = t.title[0].toUpperCase();
    downloadLink.href = t.url;
  }

  function playTrack(i) {
    current = i;
    audio.src = tracks[current].url;
    audio.play();
    isPlaying = true;
    updateNow();
    updatePlayButton();
  }

  function nextTrack() {
    if (repeatMode === 1) return playTrack(current); // repeat one
    current++;
    if (current >= tracks.length) {
      if (repeatMode === 2) current = 0;
      else return;
    }
    playTrack(current);
  }

  function prevTrack() {
    current--;
    if (current < 0) current = 0;
    playTrack(current);
  }

  function updatePlayButton() {
    playBtn.textContent = isPlaying ? '‚è∏' : '‚ñ∂';
  }

  playBtn.onclick = () => {
    if (!isPlaying) {
      audio.play();
      isPlaying = true;
    } else {
      audio.pause();
      isPlaying = false;
    }
    updatePlayButton();
  };

  nextBtn.onclick = nextTrack;
  prevBtn.onclick = prevTrack;

  repeatBtn.onclick = () => {
    repeatMode = (repeatMode + 1) % 3;
    repeatBtn.textContent = ['üîÅ', 'üîÇ', 'üîÑ'][repeatMode];
  };

  vol.oninput = () => (audio.volume = vol.value);
  search.oninput = e => renderLibrary(e.target.value);

  audio.ontimeupdate = () => {
    if (!audio.duration) return;
    bar.style.width = (audio.currentTime / audio.duration) * 100 + '%';
    timeEl.textContent = formatTime(audio.currentTime) + ' / ' + formatTime(audio.duration);
  };

  audio.onended = nextTrack;

  function formatTime(s) {
    s = Math.floor(s);
    const m = Math.floor(s / 60);
    const sec = s % 60;
    return m + ':' + String(sec).padStart(2, '0');
  }

  renderLibrary();
  renderPlaylist();
  updateNow();
</script>
</body>
</html>
